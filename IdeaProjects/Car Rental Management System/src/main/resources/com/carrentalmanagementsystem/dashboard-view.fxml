<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.control.ListView?>

<VBox alignment="TOP_CENTER" spacing="20.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.carrentalmanagementsystem.controller.DashboardController"
      stylesheets="@style.css"> <!-- Added stylesheet reference -->
    <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0"/>
    </padding>

    <Label text="Dashboard Overview" styleClass="h1" />
    <!-- Removed description label -->

    <!-- Key Metrics Cards -->
    <HBox alignment="CENTER" spacing="20">
        <VBox fx:id="totalCarsCard" alignment="CENTER" styleClass="dashboard-card" onMouseClicked="#handleTotalCarsClick">
            <Label text="Total Cars" styleClass="label" />
            <Label fx:id="totalCarsLabel" text="0" styleClass="value-label" />
        </VBox>
        <VBox fx:id="availableCarsCard" alignment="CENTER" styleClass="dashboard-card" onMouseClicked="#handleAvailableCarsClick">
            <Label text="Available Cars" styleClass="label" />
            <Label fx:id="availableCarsLabel" text="0" styleClass="value-label" />
        </VBox>
        <VBox fx:id="activeRentalsCard" alignment="CENTER" styleClass="dashboard-card" onMouseClicked="#handleActiveRentalsClick">
            <Label text="Active Rentals" styleClass="label" />
            <Label fx:id="activeRentalsLabel" text="0" styleClass="value-label" />
        </VBox>
        <VBox fx:id="totalCustomersCard" alignment="CENTER" styleClass="dashboard-card" onMouseClicked="#handleTotalCustomersClick">
            <Label text="Total Customers" styleClass="label" />
            <Label fx:id="totalCustomersLabel" text="0" styleClass="value-label" />
        </VBox>
    </HBox>

    <!-- Charts -->
    <GridPane hgap="20" vgap="20">
        <VBox styleClass="dashboard-card" GridPane.columnIndex="0" GridPane.rowIndex="0">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Weekly Performance" styleClass="label-bold"/>
                <Label text="Rentals +28%" styleClass="stat-pill, stat-pill-green"/>
                <Label text="Revenue +35%" styleClass="stat-pill, stat-pill-blue"/>
            </HBox>
            <BarChart fx:id="weeklyPerformanceChart" title="" legendVisible="false">
                <xAxis>
                    <CategoryAxis label="Day"/>
                </xAxis>
                <yAxis>
                    <NumberAxis label="Rentals"/>
                </yAxis>
            </BarChart>
        </VBox>
        <VBox styleClass="dashboard-card" GridPane.columnIndex="1" GridPane.rowIndex="0">
            <Label text="Car Status Distribution" styleClass="label-bold"/>
            <PieChart fx:id="carStatusPieChart" title=""/>
        </VBox>
        <columnConstraints>
            <ColumnConstraints percentWidth="60.0" />
            <ColumnConstraints percentWidth="40.0" />
        </columnConstraints>
        <rowConstraints>
            <RowConstraints />
        </rowConstraints>
    </GridPane>

    <!-- Recent Activities and Quick Actions -->
    <GridPane hgap="20" vgap="20">
        <VBox styleClass="dashboard-card" GridPane.columnIndex="0" GridPane.rowIndex="0">
            <Label text="Recent Activities" styleClass="label-bold"/>
            <TableView fx:id="recentActivitiesTable"/>
        </VBox>
        <VBox styleClass="dashboard-card, overdue-card" GridPane.columnIndex="1" GridPane.rowIndex="0">
            <Label text="âš ï¸ Overdue Rentals" styleClass="label-bold"/>
            <ListView fx:id="overdueRentalsListView" />
        </VBox>
        <VBox spacing="10" styleClass="dashboard-card" GridPane.columnIndex="2" GridPane.rowIndex="0">
            <Label text="Quick Actions" styleClass="label-bold"/>
            <Button fx:id="addNewCarButton" text="âž• ðŸš˜" maxWidth="Infinity" styleClass="quick-action-button"/>
            <Button fx:id="addNewCustomerButton" text="âž• ðŸ‘¤" maxWidth="Infinity" styleClass="quick-action-button"/>
        </VBox>
        <columnConstraints>
            <ColumnConstraints percentWidth="50.0" />
            <ColumnConstraints percentWidth="25.0" />
            <ColumnConstraints percentWidth="25.0" />
        </columnConstraints>
        <rowConstraints>
            <RowConstraints />
        </rowConstraints>
    </GridPane>
</VBox>
